<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Facebook â†’ CRM Permission Debug</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    .card { border: 1px solid #ddd; padding: 15px; margin-top: 15px; }
    button { padding: 10px 15px; cursor: pointer; }
    pre { background: #f7f7f7; padding: 10px; overflow: auto; }
  </style>
</head>
<body>

  <h2>Facebook â†’ CRM Permission Debug</h2>

  <div class="card">
    <button onclick="fbLogin()">Login with Facebook</button>
  </div>

  <div class="card">
    <h3>Result</h3>
    <pre id="result">Please log in to check permission status.</pre>
  </div>

  <!-- Facebook SDK -->
  <script>
    window.fbAsyncInit = function () {
      FB.init({
        appId: '1252773156743952',   // ðŸ”´ replace with correct App ID
        cookie: true,
        xfbml: false,
        version: 'v19.0'
      });
    };

    (function (d, s, id) {
      if (d.getElementById(id)) { return; }
      var js = d.createElement(s); js.id = id;
      js.src = "https://connect.facebook.net/en_US/sdk.js";
      d.getElementsByTagName(s)[0].parentNode.insertBefore(js, s);
    }(document, 'script', 'facebook-jssdk'));

    function fbLogin() {
      FB.login(function (response) {
        document.getElementById('result').textContent =
          JSON.stringify(response, null, 2);

        if (response.status === 'connected') {
          console.log('Login success');
          console.log('Access Token:', response.authResponse.accessToken);
        } else {
          console.log('Login failed or cancelled');
        }
      }, {
        scope: 'public_profile,email'   // âœ… ONLY valid JS login scopes
      });
    }
  </script>

</body>
</html>
